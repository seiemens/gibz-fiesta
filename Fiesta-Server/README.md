# FIEÅšTA-BACKEND
## Setup & Configuration
In case of compiler errors, ensure that the current rust branch is `nightly`.
To switch, use `rustup override set nightly`. If `nightly` isn't working, use `default`.
### Dependencies
- [Rust](https://www.rust-lang.org/) & RustUp (Installed per Default)
- [rocket.rs](https://rocket.rs/)
- [mongo rust driver](https://www.mongodb.com/docs/drivers/rust/)
### Setup
Install Rust, navigate to git Repo, run `cargo run`. Enjoy!
### Config
Configurations to the Server (e.g. Ports and IP's) can be made in `Rocket.toml`. `.env` File needed!

## Structure
### `api`
Contains all files related to the API endpoints & routes.

### `data`
Contains all files related to Data interaction such as the `mongo_connector`.

### `helpers`
Contains small "helper" functions such as token generation & encryption. Those have been put into separate files due to the lazyness of the backend dev.

### `models`
Contains the Database Models, currently 2: `Skill` & `User`.


## Endpoints
<p align="center">IMPORTANT: <br/> ERROR CODE FOR ALL FAILURES IS <br/> <b>418.</b></p>
<p align="center">Note: Most requests can be done with solely the <b>ObjectId</b> of said Skill / User.</i></p>

### User - Related
User - Related Endpoints are accessible through the `/user/` proxy.
| Endpoint     |     Required Values     | Type |            Success - Response |
| ------------ | :---------------------: | ---: | ----------------------------: |
| /create      | [User Json](#user-json) | POST |                           200 |
| /login       |   Username, Password    | POST | [Auth Biscuit](#auth-biscuit) |
| /logout      |         Nothing         |  GET |                           200 |
| /update      | [User Json](#user-json) | POST |                           200 |
| /delete      |   `ObjectId` of user    | POST |                           200 |
| /all         |         Nothing         |  GET |  Arrrray containing all users |
| /auth        |         Nothing         |  GET |       [User Json](#user-json) |
| coming soon? |      banana bread       | MONK |                           WIP |

### Skill - Related
Skill - Related Endpoints are accessible through the `/skill/` proxy.
| Endpoint     |      Required Values      | Type |           Success - Response |
| ------------ | :-----------------------: | ---: | ---------------------------: |
| /create      | [Skill Json](#skill-json) | POST |    [Skill Json](#skill-json) |
| /update      | [Skill Json](#skill-json) | POST |    [Skill Json](#skill-json) |
| /all         |          Nothing          |  GET | Arrray containing all skills |
| /mark        | [Skill Json](#skill-json) | POST |                          200 |
| /delete      |    `ObjectId` of skill    | POST |                          200 |
| /complete    |    `ObjectId` of skill    |  GET |200 |
| coming soon? |       banana bread        | MONK |                          WIP |
#### User Json
```json
{
    "name": "String",
    "username":"String",
    "password": "String",
    "email":"String",
    "role": "Int", // 0..1 -> 0: Admin, 1: User
    "field": "String", // such as IT, KV, whatever
    "completed_skills":[], // leave empty -> []
    "auth_token":"String", // auto-generated by backend, leave empty (" ")
    "active":"Bool" // will be set to "true" by default.
}
```

#### Skill Json
```json
{
    "name": "String",
    "levels": [
        {
            "id":"Int",
            "name":"String",
            "description":"String",
            "resources":[
                {                
                "name":"String",
                "url":"String"
                },
            ],
        },
    ],
}
```

#### Auth Biscuit
Contains the `auth_token` of the user, if the login is successful.
